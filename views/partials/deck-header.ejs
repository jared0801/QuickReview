<div class="container">
    <div class="row">
        <div class="col-lg-4 col-md-6 deck-header-container">
            <h1><%= deck.title %></h1>

            <% if(deck.image && deck.image.url) { %>
                <div>
                    <img src="<%= deck.image.url %>" alt="Deck image" width="200">
                </div>
            <% } %>
        </div>
        <div class="col-lg-8 col-md-6 deck-header-container">
            <div class="deck-header-info">
                <div><%= deck.description %></div>
                <br>
                <% if(deck.subjects && deck.subjects.length) { %>
                    <div>
                        Subjects: 
                        <% deck.subjects.forEach(function(subj, i) { %><%= i > 0 ? ', ' : '' %><%= subj %><% }); %>
                    </div>
                    <br>
                <% } %>
                <div>
                    Average Rating: <%= deck.avgRating %>
                    <p class="starability-result" data-rating="<%= roundedAvgRating %>">
                        Rated: <%= roundedAvgRating %> stars
                    </p>
                </div>
                <div>
                    <a class="btn btn-info" href="/decks/<%= deck.id %>/review">
                        Review
                    </a>
                    <a class="btn btn-success" href="/decks/<%= deck.id %>/test">
                        Test
                    </a>
                </div>
                <% if(currentUser && deck.author.equals(currentUser._id)) { %>
                    <div class="mt-3">
                        <a class="btn btn-primary" href="/decks/<%= deck.id %>/cards/new">
                            Add card(s)
                        </a>
                        <a class="btn btn-secondary" href="/decks/<%= deck.id %>/edit">
                            Edit
                        </a>
                        <div class="btn btn-delete">
                            <form action="/decks/<%= deck.id %>?_method=DELETE" method="POST">
                                <input type="submit" value="Delete" class="btn btn-danger" role="button">
                            </form>
                        </div>
                    </div>
                <% } %>
            </div>
            <% if(deck.public === false) { %>
                <p class="text-danger mt-2">This deck is private, meaning only you can access it.</p>
            <% } %>
        </div>
    </div>
</div>
